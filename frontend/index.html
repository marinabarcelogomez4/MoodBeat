<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>MoodBeat Assistant</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/index.css">
</head>
<body>

  <!-- 🔝 Barra superior -->
  <div class="topbar">
    
    <div class="user-info">
      <span id="usernameDisplay">👤 Usuario</span>
      <button id="logoutBtn" class="logout-btn" title="Cerrar sesión">🔒</button>
    </div>
  </div>

  <div class="main-container">
    
    <div class="card">

      <!-- 💬 Chat principal -->
      <div class="chat-container">
        <button class="toggle-sidebar-btn" title="Abrir historial" onclick="toggleSidebar()">☰</button>

        <div class="assistant-side">
          
          <div class="energy-ball"></div>
          <p class="greeting">Hola, ¿cómo te sientes hoy?</p>
        </div>

        <div class="input-side">
          <div id="chat-log">
            <input type="text" id="userInput" placeholder="Escribe tu estado de ánimo...">
             </div>
            <button id="recommendBtn">🎵 Recomendar música</button>
            <div id="loading" style="display: none;">Cargando...</div>

            <div class="results">
              <h3 id="emotionOutput"></h3>
              <div id="playlists"></div>
            </div>
         
        </div>
      </div>

      <!-- 📚 Sidebar de historial -->
    <aside class="sidebar" id="sidebar">
      <h1 id="usernameSidebar"></h1>
      <h3 id="historyHeader">🕓 Historial de Recomendaciones</h3>

      <!-- botón de refresco -->
      <!-- <button id="refreshHistory" class="refresh-btn">🔄 Actualizar historial</button> -->

      <div id="userHistory"></div>
      <ul id="promptHistory" class="history-cards"></ul>
    </aside>
    </div>
  </div>

  <!-- 🎧 Modal para Spotify -->
  <div id="modal" class="modal">
    <div class="modal-content">
      <span id="modalClose" class="close">&times;</span>
      <iframe id="spotifyEmbed" width="100%" height="380" frameborder="0"
        allowtransparency="true" allow="encrypted-media"></iframe>
    </div>
  </div>


  <!-- modal historial -->
  <div id="historyModal" class="modal">
    <div class="modal-box">
      <span id="historyModalClose" class="close-btn">×</span>
      <div id="historyModalContent"></div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="scripts/index.js"></script>
  <script>
    gsap.to(".energy-ball", {
      scale: 1.1,
      repeat: -1,
      yoyo: true,
      duration: 1.5,
      ease: "power1.inOut"
    });

    // 👉 Sidebar toggle
    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('active');
    }
  </script>
 
  




</body>
</html>
